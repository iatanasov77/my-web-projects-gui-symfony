{% if fileId and form.vars.value %}
    {% set originalName = file.originalName %}
{% else %}
    {% set originalName = 'Choose File' %}
{% endif %}

{{ form_start(form, { 'action': path( 'vsorg_downloads_file_upload', {'directoryId': directoryId, 'fileId': fileId} ), 'attr': {'id': 'formUpload', 'class': 'form-horizontal '} }) }}
    {# Hidden Fields Needed For OneUp Uploader #}
    {{ form_widget( form.id ) }}
    {{ form_widget(form.fileId, { 'id': 'FileResourceId' }) }}
    {{ form_widget(form.fileClass, { 'id': 'FileResourceClass' }) }}
    {{ form_widget(form.ownerId, { 'id': 'FileOwnerId' }) }}
    {{ form_widget(form.ownerClass, { 'id': 'FileOwnerClass' }) }}
    
    {# Main Entity Fields #}
    {{ form_widget(form.owner) }}
    
    <div class="form-group">
        {{ form_label(form.title, null, {
            'label_attr': {'class': 'form-label'}
            }) 
        }}
        {{ form_widget(form.title, {
            'attr': {
                'class': 'form-control',
            }
        }) }}
    </div>
    
    <div class="form-group">
        {{ form_label(form.file, null, {
            'label_attr': {'class': 'form-label'}
            }) 
        }}
        <div class="input-group form-field-file">
            {{ form_widget(form.file, {
                'attr': {
                    'class': 'form-control',
                }
            }) }}
            <label class="input-group-text" id="upload_file_form_file_custom_label" for="upload_file_form_file">{{ originalName }}</label>
        </div>
    </div>
{{ form_end(form, {'render_rest': false}) }}