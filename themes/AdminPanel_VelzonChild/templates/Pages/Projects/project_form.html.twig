{# Import Macros #}
{% from '@SyliusResource/Macros/actions.html.twig' import create %}
{% import "@VSApplication/Macros/form.html.twig" as vs_form %}

{% if useFormMethod is defined %}{% set formMethod = useFormMethod %}{% else %}{% set formMethod = 'PUT' %}{% endif %}
{{ form_start(form, { 'attr': {'class': 'form-horizontal '}, 'method': formMethod }) }}
    
    {{ form_widget(form.position) }}
    
    <div class="form-check form-check-secondary mb-3">
        <input type="checkbox" id="project_form_enabled" name="project_form[enabled]" 
            class="form-check-input"
            {% if form.vars.value.enabled %}checked="checked"{% endif %}
        />
        <label class="form-check-label" for="project_form_enabled">
            {{ 'vankosoft_org.form.published'|trans({}, 'VankoSoftOrg') }}
        </label>
    </div>
    
    <div class="form-group">
        {{ form_label(form.locale, null, {
            'label_attr': {'class': 'form-label'}
            }) 
        }}
        
        {{ form_widget(form.locale, {'attr': {'class': 'form-select'}}) }}
    </div>
    
    <div class="form-group">
        {{ form_label(form.category, null, {
            'label_attr': {'class': 'form-label'}
            }) 
        }}
        
        {{ form_widget(form.category, {'attr': {'class': 'form-select'}}) }}
    </div>
    
    <div class="form-group">
        {{ form_label(form.document, null, {
            'label_attr': {'class': 'form-label'}
            }) 
        }}
        <div class="input-group mb-3">
            {{ form_widget(form.document, {'attr': {'class': 'form-select'}}) }}
            <div class="input-group-append">
            {% if item.document %}
                <a class="btn btn-primary"
                    href="{{ path( 'vs_cms_document_update', {'id': item.document.id } ) }}"
                    title="{{ 'vs_application.template.items_index_row_action_edit' | trans( {},'VSApplicationBundle' ) }}"    
                >
                    {{ 'vankosoft_org.form.document_update' | trans( {},'VankoSoftOrg' ) }}
                </a>
            {% else %}
                <a class="btn btn-primary"
                    href="{{ path( 'vs_cms_document_create' ) }}"
                    title="{{ 'vs_application.template.create_title' | trans( {},'VSApplicationBundle' ) }}"    
                >
                    {{ 'vankosoft_org.form.document_create' | trans( {},'VankoSoftOrg' ) }}
                </a>
            {% endif %}
            </div>
        </div>
    </div>
    
    <div class="form-group">
        {{ form_label(form.title, null, {
            'label_attr': {'class': 'form-label'}
            }) 
        }}
        
        {{ form_widget(form.title, {'attr': {'class': 'form-control'}}) }}
    </div>
    
    <div class="form-group">
        {{ form_label(form.description, null, {
            'label_attr': {'class': 'form-label'}
            }) 
        }}
        {{ form_widget(form.description, {'attr': {'class': 'form-control'}}) }}
    </div>
    
    <div class="form-group">
        {{ form_label(form.codeUrl, null, {
            'label_attr': {'class': 'form-label'}
            }) 
        }}
        {{ form_widget(form.codeUrl, {
            'attr': {
                'class': 'form-control',
                
            }
        }) }}
    </div>
    
    <div class="form-group">
        {{ form_label(form.projectUrl, null, {
            'label_attr': {'class': 'form-label'}
            }) 
        }}
        {{ form_widget(form.projectUrl, {
            'attr': {
                'class': 'form-control',
                
            }
        }) }}
    </div>
    
    <fieldset class="border border-dark rounded p-3 mb-3">
        <legend class="w-auto float-none ps-2 pe-2">{{ 'vankosoft_org.form.project.git'  | trans( {},'VankoSoftOrg' ) }}</legend>
        
        <div class="form-group mb-2">
            {{ form_label(form.gitClient, null, {
                'label_attr': {'class': 'form-label'}
                }) 
            }}
            <div>
                {% for client in form.gitClient %}
                    <span class="me-2">
                        {{ form_widget( client, { 'attr': { 'class': 'form-check-input' } } ) }}
                        {{ form_label( client, null, { 'label_attr': { 'class': 'form-check-label' } } ) }}
                    </span>
                {% endfor %}
            </div>
        </div>
                                
        <div class="form-group mb-2">
            {{ form_label(form.githubRepo, null, {
                'label_attr': {'class': 'form-label'}
                }) 
            }}
            {{ form_widget(form.githubRepo, {
                'attr': {
                    'class': 'form-control',
                    
                }
            }) }}
        </div>
    </fieldset>
    
    <fieldset class="border border-dark rounded p-3">
        <legend class="w-auto float-none ps-2 pe-2">{{ 'vankosoft_org.form.project.project_attributes'  | trans( {},'VankoSoftOrg' ) }}</legend>
        <div class="attributesContainer" data-prototype="{% apply escape %}{% include 'Pages/Projects/add-attribute-prototype.html.twig' with {'form': form.attributes.vars.prototype} %}{% endapply %}"> 
            {% for attr in form.attributes %}
                {% include 'Pages/Projects/add-attribute-prototype.html.twig' with {'form': attr} %}
            {% endfor %}
        </div>
    </fieldset>

    <div class="row">&nbsp;</div>
    
    {{ vs_form.buttons( form, metadata is defined ? metadata : null ) }}
{{ form_end(form, {'render_rest': false}) }}